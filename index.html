<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Love Message Generator</title>
  <meta name="description" content="A tiny website that shows a random love note each time you click." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: 'Poppins', system-ui, sans-serif; color: #fff; overflow: hidden; background: #0b0b12; }

    /* Background */
    .bg-layer { position: fixed; inset: 0; background-position: center; background-size: cover; background-repeat: no-repeat; filter: brightness(0.72) saturate(1.05); transition: opacity 1200ms ease-in-out, transform 8s ease; will-change: opacity, transform; }
    .bg-a { z-index: -2; } .bg-b { z-index: -3; } .bg-layer.zoom { transform: scale(1.05); }
    .overlay { position: fixed; inset: 0; pointer-events: none; z-index: -1; background: radial-gradient(100% 120% at 50% 50%, rgba(0,0,0,0) 0%, rgba(0,0,0,0.35) 62%, rgba(0,0,0,0.55) 100%), linear-gradient(180deg, rgba(0,0,0,0.12) 0%, rgba(0,0,0,0.45) 100%); }

    .container { position: relative; height: 100vh; display: grid; place-items: center; padding: clamp(16px, 3vw, 40px); }

    .card { width: min(820px, 92vw); background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.18); backdrop-filter: blur(10px); border-radius: 24px; padding: clamp(18px, 3vw, 28px); box-shadow: 0 10px 40px rgba(0,0,0,0.35); text-align: center; }
    .title { font-weight: 600; letter-spacing: 0.3px; font-size: clamp(18px, 2.2vw, 22px); opacity: 0.9; margin: 4px 0 14px; }
    .message { font-size: clamp(26px, 4.2vw, 42px); line-height: 1.2; font-weight: 600; margin: 8px 0 18px; opacity: 0; transform: translateY(8px); transition: opacity 400ms ease, transform 400ms ease; }
    .message.show { opacity: 1; transform: translateY(0); }

    .controls { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; align-items: center; margin-top: 18px; }

    button { cursor: pointer; border: 1px solid rgba(255,255,255,0.25); background: rgba(255,255,255,0.12); color: #fff; border-radius: 14px; padding: 10px 16px; font-weight: 600; transition: transform 120ms ease, background 200ms ease; backdrop-filter: blur(6px); }
    button:hover { transform: translateY(-1px); background: rgba(255,255,255,0.18); }

    .footer { position: fixed; left: 50%; bottom: 14px; transform: translateX(-50%); font-size: 12px; opacity: 0.7; background: rgba(0,0,0,0.35); border-radius: 10px; border: 1px solid rgba(255,255,255,0.16); padding: 6px 10px; }

    /* ≈ûifre ekranƒ± */
    .gate-overlay { position: fixed; inset: 0; z-index: 50; display: grid; place-items: center; background: rgba(7, 9, 14, 0.78); backdrop-filter: blur(10px); }
    .gate-stack { width: min(560px, 94vw); display: flex; flex-direction: column; gap: 28px; align-items: stretch; }
    .intro-bubble { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.18); border-radius: 16px; padding: 20px 22px; box-shadow: 0 6px 30px rgba(0,0,0,0.35); text-align: center; font-weight: 600; font-size: 17px; line-height: 1.7; }
    .gate-card { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.18); border-radius: 20px; padding: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); text-align: center; }
    .gate-input { width: 100%; border-radius: 12px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.28); color: #fff; padding: 12px 14px; outline: none; font-size: 16px; }
    .gate-hint { font-size: 13px; opacity: 0.8; margin-top: 8px; font-style: italic; }
    .gate-actions { display: flex; gap: 10px; margin-top: 10px; justify-content: center; }

    /* HUD (Saya√ßlar) */
    .hud { position: fixed; top: 12px; padding: 10px 14px; background: rgba(30, 10, 20, 0.45); border: 1px solid rgba(255, 140, 180, 0.5); border-radius: 14px; backdrop-filter: blur(8px); font-size: 15px; line-height: 1.5; box-shadow: 0 0 24px rgba(255, 120, 160, 0.35), 0 6px 22px rgba(0,0,0,0.25); text-transform: uppercase; letter-spacing: 0.6px; }
    .hud-left { left: 12px; text-align: left; }
    .hud-right { right: 12px; text-align: right; }
    .hud-left::before, .hud-right::before { display: inline-block; margin-right: 8px; filter: drop-shadow(0 0 6px rgba(255,120,160,0.6)); }
    .hud-left::before { content: '‚è±Ô∏è'; }
    .hud-right::before { content: '‚è≥'; }

    /* Music button */
    .music-btn { position: fixed; right: 18px; bottom: 18px; width: 48px; height: 48px; border: none; border-radius: 50%; background: rgba(30,10,20,0.55); color: #fff; font-size: 20px; display: none; cursor: pointer; box-shadow: 0 0 18px rgba(255,120,160,0.35), 0 6px 22px rgba(0,0,0,0.25); backdrop-filter: blur(8px); z-index: 60; }
    .music-btn:hover { transform: translateY(-2px); }
    .music-btn:active { transform: translateY(0); }

    /* ===== Mobile fix: saya√ßlarƒ± √ºst √ºste binmeden sƒ±rala ===== */
    @media (max-width: 600px) {
      .hud { font-size: 13px; }
      .hud-left, .hud-right { left: 12px; right: 12px; text-align: center; }
      .hud-left { top: 12px; }
      .hud-right { top: 64px; }
    }
  </style>
</head>
<body>
  <div class="bg-layer bg-a" id="bgA"></div>
  <div class="bg-layer bg-b" id="bgB"></div>
  <div class="overlay"></div>

  <!-- Background music + control -->
  <audio id="bgMusic" src="love.mp3" preload="auto" loop muted></audio>
  <button id="musicBtn" class="music-btn" aria-label="M√ºziƒüi A√ß/Kapat">üéµ</button>

  <!-- HUD Counters -->
  <div class="hud hud-left" id="elapsedHud" aria-live="polite"></div>
  <div class="hud hud-right" id="countdownHud" aria-live="polite"></div>

  <div class="gate-overlay" id="gate">
    <div class="gate-stack">
      <div class="intro-bubble">
        <p>Canƒ±m sevgilim, 6 ay yani tamƒ± tamƒ±na YARIM SENE olmamƒ±zƒ±n ≈üerefine seni ne kadar √ßok sevdiƒüimi ve neden bu kadar sevdiƒüimi g√∂stermek istedim ama normalden farklƒ± olarak bu sefer kendi tarzƒ±mda g√∂stermek istedim bunu. Umarƒ±m beƒüenirsin, seni seviyorum √ß√ºnk√º...</p>
      </div>
      <div class="gate-card">
        <h1>Ho≈ü geldin a≈ükƒ±m</h1>
        <p>Burasƒ± sadece ikimize √∂zel!</p>
        <input id="gateInput" class="gate-input" type="password" placeholder="≈ûifre..." autocomplete="off" />
        <div class="gate-hint">ƒ∞pucu: ƒ∞lk bulu≈ütuƒüumuz yerin adƒ± üí≠</div>
        <div class="gate-actions">
          <button id="gateSubmit">Giri≈ü</button>
        </div>
      </div>
    </div>
  </div>

  <main class="container" aria-hidden="true" id="app">
    <section class="card">
      <div class="title">Seni seviyorum √ß√ºnk√º‚Ä¶</div>
      <div id="message" class="message"></div>
      <div class="controls">
        <button id="nextMsgBtn">Yeni mesaj</button>
        <button id="shuffleImagesBtn">Yeni fotoƒüraf</button>
      </div>
    </section>
  </main>

  <div class="footer">Made with ‚ù§Ô∏è ‚Äî Baran &lt;3</div>

  <script>
    // ===== Config =====
    const GATE = { password: 'perast' };

    const IMAGE_URLS = ['images/1.jpg','images/2.jpg','images/3.jpg','images/4.jpg','images/5.jpg','images/6.jpg','images/8.jpg','images/9.jpg','images/10.jpg','images/11.jpg'];
    const MESSAGES = [ 'G√ºl√º≈ü√ºn beni benden alƒ±yor.','Banana','Namnam','Sabah uyandƒ±ƒüƒ±mda duyacaƒüƒ±m ilk sesin sen olu≈üu beni √ßok mutlu ediyor','Seni her g√∂rd√ºƒü√ºmde karnƒ±mda kelebekler u√ßu≈üuyor','Beraberken zamanƒ±n akƒ±≈üƒ±nƒ± unutuyorum','Bana kendimi hep g√ºvende hissetiriyiorsun.','Hayallerimi daha b√ºy√ºk kurmamƒ± saƒülƒ±yorsun.','Zor g√ºnlerimde bile bana iyi geliyorsun.','Hayatƒ±mda g√∂rd√ºƒü√ºm en ama en g√ºzel insansƒ±n.','G√ºzel olmanƒ±n yanƒ±nda kalbin de bir o kadar g√ºzel.','Birlikteyken bu kalabalƒ±k ≈üehir bile yapayalnƒ±zmƒ±≈üƒ±z gibi hissettiriyor.','Elini tutunca tamamlanmƒ±≈ü hissediyorum'];

    const BG_SLIDE_INTERVAL = 7000;

    // === Tarih sabitleri ===
    // ƒ∞lk bulu≈üma: 14 Mart 2025 15:00 (yerel saat)
    const FIRST_MEET = new Date(2025, 2, 14, 15, 0, 0);
    // 1. yƒ±l d√∂n√ºm√º hedefi: 20 Nisan 2026 00:00 (yerel saat)
    const ONE_YEAR = new Date(2026, 3, 20, 0, 0, 0);

    const $ = id => document.getElementById(id);
    function makeDeck(n, avoid=-1){const arr=Array.from({length:n},(_,i)=>i);for(let i=n-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}if(n>1&&avoid>=0&&arr[0]===avoid){[arr[0],arr[1]]=[arr[1],arr[0]];}return arr;}

    // Background deck
    const bgA=$('bgA'),bgB=$('bgB');let active='A',curImg=-1,imgDeck=[],imgPtr=0;
    function refillImg(){imgDeck=makeDeck(IMAGE_URLS.length,curImg);imgPtr=0;}
    function setBgFromDeck(){if(!imgDeck.length||imgPtr>=imgDeck.length)refillImg();const i=imgDeck[imgPtr++];const next=active==='A'?bgB:bgA;const prev=active==='A'?bgA:bgB;next.style.backgroundImage = "url('" + IMAGE_URLS[i] + "')";next.style.opacity='0';void next.offsetWidth;next.classList.add('zoom');next.style.opacity='1';prev.style.opacity='0';prev.classList.remove('zoom');active=active==='A'?'B':'A';curImg=i;}

    // Messages deck
    const msgEl=$('message');let curMsg=-1,msgDeck=[],msgPtr=0;
    function refillMsg(){msgDeck=makeDeck(MESSAGES.length,curMsg);msgPtr=0;}
    function showMsg(){if(!msgDeck.length||msgPtr>=msgDeck.length)refillMsg();const i=msgDeck[msgPtr++];curMsg=i;msgEl.classList.remove('show');setTimeout(()=>{msgEl.textContent=MESSAGES[i];msgEl.classList.add('show');},140);}

    // HUD logic
    const elapsedHud = document.getElementById('elapsedHud');
    const countdownHud = document.getElementById('countdownHud');

    function addMonthsTo(date, months){ const d=new Date(date); const target=d.getMonth()+months; d.setMonth(target); return d; }
    function diffMonthsDaysHours(from, to){ if (to < from) return { months: 0, days: 0, hours: 0 }; let months=(to.getFullYear()-from.getFullYear())*12 + (to.getMonth()-from.getMonth()); let anchor=addMonthsTo(from, months); if (anchor>to){ months--; anchor=addMonthsTo(from, months); } let ms=to-anchor; const dayMs=86400000; const days=Math.floor(ms/dayMs); ms-=days*dayMs; const hours=Math.floor(ms/3600000); return { months, days, hours }; }
    function updateElapsed(){ const now=new Date(); const { months, days, hours } = diffMonthsDaysHours(FIRST_MEET, now); elapsedHud.textContent = `ƒ∞lk bulu≈ümadan ge√ßen: ${months} ay ${days} g√ºn ${hours} saat`; }
    function updateCountdown(){ const now=new Date(); let ms=ONE_YEAR-now; if (ms<0) ms=0; const dayMs=86400000; const hourMs=3600000; const minMs=60000; const days=Math.floor(ms/dayMs); ms-=days*dayMs; const hours=Math.floor(ms/hourMs); ms-=hours*hourMs; const minutes=Math.floor(ms/minMs); countdownHud.textContent = `1 yƒ±la kalan: ${days} g√ºn ${hours} saat ${minutes} dakika`; }
    function layoutHud(){ const gap=8; if (!elapsedHud||!countdownHud) return; if (window.innerWidth <= 600){ const h = elapsedHud.offsetHeight || 44; elapsedHud.style.left='12px'; elapsedHud.style.right='12px'; elapsedHud.style.top='12px'; elapsedHud.style.textAlign='center'; countdownHud.style.left='12px'; countdownHud.style.right='12px'; countdownHud.style.top=(12+h+gap)+'px'; countdownHud.style.textAlign='center'; } else { elapsedHud.style.left=''; elapsedHud.style.right=''; elapsedHud.style.top='12px'; elapsedHud.style.textAlign=''; countdownHud.style.left=''; countdownHud.style.right=''; countdownHud.style.top='12px'; countdownHud.style.textAlign=''; } }
    function startHud(){ updateElapsed(); updateCountdown(); layoutHud(); setInterval(()=>{ updateElapsed(); updateCountdown(); }, 60000); }
    window.addEventListener('resize', layoutHud);

    // Controls & gate
    const nextBtn=$('nextMsgBtn'),imgBtn=$('shuffleImagesBtn'),gate=$('gate'),input=$('gateInput'),submit=$('gateSubmit');
    let timer=null;function startSlide(){clearInterval(timer);timer=setInterval(setBgFromDeck,BG_SLIDE_INTERVAL);}

    nextBtn.onclick=()=>showMsg();
    imgBtn.onclick=()=>{setBgFromDeck();startSlide();};

    // Background music
    const music = $('bgMusic');
    const musicBtn = $('musicBtn');
    let musicPlaying = false;
    if (music) { music.volume = 0.6; music.play().catch(()=>{}); }
    if (musicBtn) { musicBtn.addEventListener('click', async ()=>{ if (!music) return; try { if (!musicPlaying) { await music.play(); musicPlaying = true; musicBtn.textContent = 'üîá'; } else { music.pause(); musicPlaying = false; musicBtn.textContent = 'üéµ'; } } catch(e){ console.warn('M√ºzik √ßalma hatasƒ±:', e); alert('M√ºzik ba≈ülatƒ±lamadƒ±. Dosya yolu doƒüru mu? (love.mp3)'); } }); }
    function fadeVolume(target=0.6, duration=800){ if(!music) return; const start=music.volume; const t0=performance.now(); function step(t){ const p=Math.min(1,(t-t0)/duration); music.volume = start + (target-start)*p; if(p<1) requestAnimationFrame(step);} requestAnimationFrame(step); }

    submit.onclick = async ()=>{
      if (input.value === GATE.password){
        gate.style.display='none';
        $('app').removeAttribute('aria-hidden');
        startSlide();
        startHud();
        showMsg();
        if (musicBtn) musicBtn.style.display='block';
        if (music){ try { music.muted=false; await music.play(); musicPlaying=true; musicBtn.textContent='üîá'; fadeVolume(0.6,800); } catch(e){ console.warn('Autoplay olmadƒ±, butonla ba≈ülanabilir:', e); } }
      } else { alert('Yanlƒ±≈ü ≈üifre üí´'); }
    };

    input.addEventListener('keydown', (e)=>{ if(e.key==='Enter') submit.click(); });

    (function init(){
      if (IMAGE_URLS.length){
        bgA.style.backgroundImage = "url('" + IMAGE_URLS[0] + "')";
        bgA.style.opacity = '1';
        bgA.classList.add('zoom');
        curImg=0; refillImg();
      }
      refillMsg();
    })();
  </script>
</body>
</html>
